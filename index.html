<!-- STRUCTURE  -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
</figure>

<!-- CSS  -->
<style>
    body {
        background: none; /* Arrière-plan de la page */
    }

    #container {
        height: 400px;
    }

    .highcharts-credits {
        display: none; /* Enlève les crédits Highcharts */
    }

    .highcharts-figure,
    .highcharts-data-table table {
        min-width: 310px;
        max-width: 800px;
        margin: 1em auto;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #ebebeb;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }
</style>

<!-- SCRIPT  -->
<script>
Highcharts.chart('container', {
    chart: {
        type: 'pie',
        options3d: {
            enabled: true,
            alpha: 45
        },
        backgroundColor: 'transparent', // Arrière-plan du graphique transparent
        animation: {
            duration: 300 // Durée de l'animation en millisecondes
        }
    },
    title: {
        text: '',
        align: 'left',
        style: {
            color: '#FFFFFF' // Texte du titre en blanc
        }
    },
    subtitle: {
        text: '',
        align: 'left',
        style: {
            color: '#FFFFFF' // Texte du sous-titre en blanc
        }
    },
    tooltip: {
        pointFormat: '{point.name}: <b>{point.y} €</b>' // Ajoute "€" après le montant dans l'infobulle
    },
    plotOptions: {
        pie: {
            innerSize: 100,
            depth: 45,
            dataLabels: {
                enabled: true, // Affiche les étiquettes de valeurs
                color: '#D3D3D3', // Couleur des labels en gris clair
                style: {
                    textOutline: 'none' // Enlève les contours des textes des labels
                },
            },
            point: {
                events: {
                    click: function () {
                        // Redirection vers une URL spécifique basée sur l'année cliquée
                        var urlMap = {
                            '2021': 'https://www.notion.so/D-pense-1153990f694080c7936aea4deab88be6?pvs=4',
                            '2022': 'https://example.com/2025',
                            '2023': 'https://example.com/2026',
                            '2024': 'https://example.com/2027',
                            '2025': 'https://example.com/2028'
                        };
                        // Ouvre la page correspondant à l'année cliquée
                        window.open(urlMap[this.name], '_blank'); // Ouvre dans un nouvel onglet
                    }
                },
                cursor: 'pointer' // Ajoute le curseur pointer sur les sections cliquables
            }
        }
    },
    series: [{
        name: 'Montants',
        data: [
            ['2021', 10148.04], // Montant pour l'année 2021
            ['2022', 16653.07], // Montant pour l'année 2022
            ['2023', 19126.53], // Montant pour l'année 2023
            ['2024', 21755.79], // Montant pour l'année 2024
            ['2025', 9060.99], // Montant pour l'année 2025
        ],
        colors: [ // Couleurs personnalisées pour les sections
            '#ffc75f', // Couleur pour 2021
            '#9999ff', // Couleur pour 2022
            '#fefedf', // Couleur pour 2023
            '#00c9a7', // Couleur pour 2024
            '#c34a36', // Couleur pour 2025
        ],
    }],
    plotBackgroundColor: 'transparent' // Arrière-plan de la zone de tracé transparent
});
</script>
